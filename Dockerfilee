FROM python:3.10-slim

# Force logs to show up immediately
ENV PYTHONUNBUFFERED=1

RUN apt-get update && apt-get install -y ffmpeg curl

RUN curl -L https://github.com/yt-dlp/yt-dlp/releases/latest/download/yt-dlp -o /usr/local/bin/yt-dlp && chmod a+rx /usr/local/bin/yt-dlp

COPY recorder.sh /recorder.sh
RUN chmod +x /recorder.sh

# This tells Railway EXACTLY what to do when it starts
CMD ["bash", "/recorder.sh"]
